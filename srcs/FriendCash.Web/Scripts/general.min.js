function GetActionUrl(n,t){return baseActionURL.replace("BaseController",n).replace("BaseAction",t)}function GetDataJson(n){var t={url:"",checkUserToken:!0,success:function(){},done:function(){},async:!0};n=$.extend(t,n);GetDataJson_Execute(n,0)}function GetDataJson_Execute(n,t){n.checkUserToken&&authIsTokenExpired()?refreshAuthToken(function(){GetDataJson_Execute(n,t)}):$.ajax({type:"GET",url:n.url,dataType:"json",async:n.async,statusCode:{200:function(i){GetDataJson_Result(n,t,200,i)},400:function(i){GetDataJson_Result(n,t,400,i)},401:function(i){GetDataJson_Result(n,t,401,i)},403:function(i){GetDataJson_Result(n,t,403,i)},404:function(i){GetDataJson_Result(n,t,404,i)},422:function(i){GetDataJson_Result(n,t,422,i)},500:function(i){GetDataJson_Result(n,t,500,i)}}})}function GetDataJson_Result(n,t,i,r){if(i==200&&r.Result!=undefined){n.success(r);n.done();return}if(t++,console.log(n.url,{statusCode:i,tries:t,response:r}),t>=5){n.done();return}GetDataJson_Execute(n,t)}function PostDataJson(n){var t={url:"",data:{},checkUserToken:!0,success:function(){},form:null,done:function(){},async:!0};n=$.extend(t,n);PostDataJson_Execute(n,0,null)}function PostDataJson_Execute(n,t,i){t++;t>=3?(console.log(i),n.done()):n.checkUserToken&&authIsTokenExpired()?refreshAuthToken(function(){PostDataJson_Execute(n,t,i)}):$.ajax({type:"POST",url:n.url,data:n.data,dataType:"json",async:n.async,statusCode:{200:function(t){PostResponse(n,t);n.done()},400:function(t){PostResponse(n,t);n.done()},401:function(i){PostDataJson_Execute(n,t,i)},403:function(t){PostResponse(n,t);n.done()},404:function(t){PostResponse(n,t);n.done()},422:function(t){PostResponse(n,t);n.done()},500:function(t){PostResponse(n,t);n.done()}}})}function PostResponse(n,t){n.form!=undefined&&n.form.find(".validate").removeClass("invalid").removeClass("valid");t.Result==undefined&&t.Messages==undefined?t.responseText!=""&&ShowMessageResponse(t.responseText):t.Result?(n.success(t),n.done()):$.each(t.Messages,function(t,i){try{var r=JSON.parse(i.Text);r.ModelState==null?ShowMessage(r.Message,i.Type):$.each(r.ModelState,function(t,r){PostResponse_State(n,t,r,i.Type)})}catch(u){ShowMessage(i.Text,i.Type)}})}function PostResponse_State(n,t,i,r){if(isNaN(parseInt(t)))if(n.form==null)ShowMessage(t+": "+i[0],r);else{if(n.form.find("#"+t).length==0){var u=t.split(".");u!=undefined&&u.length==2&&(t=u[1])}n.form.find("label[for='"+t+"']").attr("data-error",i[0]);n.form.find("#"+t).addClass("invalid")}else PostResponse_State(n,i.Key,i.Value,r)}function GetTranslation(n){var t=n;return GetDataJson({url:GetActionUrl("Home","Translation")+"/"+n+"",checkUserToken:!1,success:function(n){t=n},async:!1}),t}function dateFromJson(n){return new Date(parseInt(n.substr(6)))}function dateFormated(n){var i=n.getDate(),t,r;return i<10&&(i="0"+i),t=n.getMonth()+1,t<10&&(t="0"+t),r=n.getFullYear(),i+"/"+t+"/"+r}function dateFormat(){return moment("3333-11-22").format("L").replace("3333","YYYY").replace("11","MM").replace("22","DD")}function decimalFormated(n){return Number(n).toLocaleString(navigator.language,{minimumFractionDigits:2})}function decimalSeparator(){var n=decimalFormated(1.1);return n.substring(1,2)}function decimalWithouThousandSeparator(n){return decimalSeparator()==","?n.replace(/[.]/g,""):n.replace(/[,]/g,"")}function decimalParse(n){return decimalSeparator()==","?(n=n.replace(/[.]/g,""),n=n.replace(",",".")):n=n.replace(/[,]/g,""),parseFloat(n)}function ShowMessage(n,t){var r=n,i="";t==1?i="info":t==2?i="warning":t==3&&(i="cancel");i!=""&&(r="<span class='valign-wrapper'><i class='material-icons valign'>"+i+"<\/i>"+n+"<\/span>");Materialize.toast(r,5e3)}function ShowMessageResponse(n){var i="alert-"+Math.floor(Math.random()*1e4),t="";t+="<div id='"+i+"' class='modal'>";t+=" <div class='modal-content'>"+n+"<\/div>";t+=" <div class='modal-footer'>";t+="  <a href='#!' class=' modal-action modal-close waves-effect waves-green btn-flat'>X<\/a>";t+=" <\/div>";t+="<\/div>";$("body").append(t);$("#"+i).modal("open")}function getFullScreenHeight(){return getFullScreenSize(),fullScreenHeight}function getFullScreenWidth(){return getFullScreenSize(),fullScreenWidth}function getFullScreenSize(){return(fullScreenHeight==-1||fullScreenWidth==-1)&&($("body").addClass("hide"),$("html").css("height","100%"),$("html").css("width","100%"),fullScreenHeight=$("html").height(),fullScreenWidth=$("html").width(),$("html").css("height",""),$("html").css("width",""),$("body").removeClass("hide")),fullScreenHeight}function refreshAuthToken(n){GetDataJson({url:GetActionUrl("Auth","CheckToken"),checkUserToken:!1,success:function(n){n.Result?(authUserTicketData=getUserTicketData(n.Data.UserTicket),console.log("refreshAuthToken",authUserTicketData),authUserTicketData.refreshTimer=setInterval(function(){authUserTicketData.IsTokenExpired=!0;clearInterval(authUserTicketData.refreshTimer);refreshAuthToken()},authUserTicketData.refreshSeconds*1e3)):console.log("refreshAuthToken-error",n)},done:function(){n!=null&&n()}})}function getUserTicketData(n){n==null&&(n={UserName:"",IsActiveUser:!1,AccessExpirationSeconds:1});var t={UserName:n.UserName,IsActiveUser:n.IsActiveUser,refreshSeconds:n.AccessExpirationSeconds};return t.IsTokenExpired=t.refreshSeconds<=1,t.refreshTime=moment().add(t.refreshSeconds,"seconds").format("L LTS"),t}function authIsTokenExpired(){return authUserTicketData==null?!0:authUserTicketData.IsTokenExpired==null?!0:authUserTicketData.IsTokenExpired}function authIsActiveUser(){return authUserTicketData==null?!1:authUserTicketData.IsActiveUser==null?!1:authUserTicketData.IsActiveUser}var fullScreenHeight=-1,fullScreenWidth=-1;