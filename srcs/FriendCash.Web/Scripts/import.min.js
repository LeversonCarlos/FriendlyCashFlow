function koImportModel(n){var t=this;t.idImport=ko.observable(n.idImport);t.State=ko.observable(n.State);t.Accounts=ko.observable(n.Accounts);t.ImportedAccounts=ko.observable(n.ImportedAccounts);t.Categories=ko.observable(n.Categories);t.ImportedCategories=ko.observable(n.ImportedCategories);t.Entries=ko.observable(n.Entries);t.ImportedEntries=ko.observable(n.ImportedEntries);t.RowDate=ko.observable(n.RowDate);t.RowDateHumanized=ko.computed(function(){return moment.duration(moment(t.RowDate()).diff(moment())).humanize()});t.refreshTimer=null;t.refreshData=function(n){GetDataJson({url:GetActionUrl("Configs","GetImportData")+"\\"+t.idImport()+"",success:function(n){if(n.Result){var i=n.Data;t.State(i.State);t.Accounts(i.Accounts);t.ImportedAccounts(i.ImportedAccounts);t.Categories(i.Categories);t.ImportedCategories(i.ImportedCategories);t.Entries(i.Entries);t.ImportedEntries(i.ImportedEntries)}},done:function(){n()}})};t.refresh=function(){t.refreshTimer!=null&&(window.clearInterval(t.refreshTimer),t.refreshTimer=null);t.refreshData(function(){(t.State()==0||t.State()==1)&&(t.refreshTimer=window.setInterval(function(){t.refresh()},250))})};(t.State()==0||t.State()==1)&&t.refresh()}var koImportContext=function(){var n=this;n.isLoading=ko.observable(!1);n.data=ko.observableArray();n.loadData=function(){n.isLoading(!0);n.data.removeAll();GetDataJson({url:GetActionUrl("Configs","GetImportData"),success:function(t){t.Result&&$.each(t.Data,function(t,i){n.data.push(new koImportModel(i))})},done:function(){n.isLoading(!1)}})};n.importClick=function(){var i=document.getElementById("importFile"),t=new FormData;t.append("image",i.files[0]);$.ajax({type:"POST",url:GetActionUrl("Configs","PostImportData"),data:t,dataType:"json",processData:!1,contentType:!1,statusCode:{200:function(){var t=setInterval(function(){clearInterval(t);n.loadData()},1e3)}}})};n.loadData()};