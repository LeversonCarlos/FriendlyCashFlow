function koEntryModel(n){var t=this,i;t.idEntry=ko.observable(n.idEntry);t.Text=ko.observable(n.Text);t.Type=ko.observable(n.Type);t.idCategory=ko.observable(n.idCategory);t.idCategoryText=ko.observable(n.idCategoryText);t.pureEntryValue=ko.observable(Math.abs(n.EntryValue));t.EntryValue=ko.observable(decimalFormated(t.pureEntryValue()));t.EntryValuePositive=ko.observable(n.EntryValue>=0);t.Balance=ko.observable(decimalFormated(n.Balance));i=!0;t.idAccount=ko.observable(n.idAccount);t.idAccountText=ko.observable(n.idAccountText);t.idAccountRelatedData=ko.observable();t.idAccountRelatedData.subscribe(function(){var f,r;if((!i||(i=!1,n.idAccount==0))&&(f=t.idAccountRelatedData(),f!=null)&&(r=JSON.parse(f.jsonValue),r.Type==accountTypeCreditCard)&&r.ClosingDay!=null&&r.ClosingDay!=0&&r.DueDay!=null&&r.DueDay!=0){var e=moment(),o=moment().date(r.ClosingDay),u=moment().date(r.DueDay);o<e&&u.add(1,"M");u<e&&u.add(1,"M");t.DueDate(u.format("L"))}},t);t.State=ko.observable(n.State);t.StateIcon=ko.computed(function(){return t.State()==1?"":t.State()==2?"warning":""},t);t.pureDueDate=ko.observable(moment(n.DueDate));t.DueDate=ko.observable(t.pureDueDate().format("L"));t.purePayDate=ko.observable(n.PayDate==null?null:moment(n.PayDate));t.PayDate=ko.observable(t.purePayDate()==null?"":t.purePayDate().format("L"));t.SearchDate=ko.observable(n.SearchDate);t.SearchDateDay=ko.computed(function(){return dateFromJson(t.SearchDate()).getDate()},t);t.SearchDateFormated=ko.computed(function(){return dateFormated(dateFromJson(t.SearchDate()))},t);t.Paid=ko.observable(n.Paid);t.Paid.subscribe(function(n){if(n){if(n&&t.PayDate()==""){var i=moment(),r=moment(t.DueDate(),dateFormat());i<r?t.PayDate(i.format("L")):t.PayDate(r.format("L"))}}else t.PayDate("")},t);t.idTransfer=ko.observable(n.idTransfer);t.idEntryIncome=ko.observable(n.idEntryIncome);t.idAccountIncome=ko.observable(n.idAccountIncome);t.idAccountIncomeText=ko.observable(n.idAccountIncomeText);t.idEntryExpense=ko.observable(n.idEntryExpense);t.idAccountExpense=ko.observable(n.idAccountExpense);t.idAccountExpenseText=ko.observable(n.idAccountExpenseText);t.idPattern=ko.observable(n.idPattern);t.idRecurrency=ko.observable(n.idRecurrency);t.idRecurrencyView=ko.observable(new koRecurrencyModel(n.idRecurrencyView))}function koRecurrencyModel(n){var t=this;n==null&&(n={idRecurrency:0,Type:2,Fixed:!0,Quantity:"",Update:0,hasRecurrency:!1});t.idRecurrency=ko.observable(n.idRecurrency);t.Type=ko.observable(n.Type);t.Fixed=ko.observable(n.Fixed);t.Fixed.subscribe(function(n){n||t.Quantity("")},t);t.Quantity=ko.observable(n.Quantity);t.Update=ko.observable(n.Update);t.hasRecurrency=ko.observable(n.hasRecurrency)}function koGroupModel(n,t,i){var r=this;r.Day=ko.observable(n);r.Date=ko.observable(t);r.FormatedDate=ko.observable(n+", "+moment(t).format("dddd"));r.searchDateFuture=ko.observable(i);r.pureBalance=ko.observable(0);r.positiveBalance=ko.computed(function(){return r.pureBalance()>=0},r);r.Balance=ko.computed(function(){return decimalFormated(r.pureBalance())},r);r.purePending=ko.observable(0);r.positivePending=ko.computed(function(){return r.purePending()>=0},r);r.Pending=ko.computed(function(){return decimalFormated(r.purePending())},r);r.State=ko.observable(0);r.StateIcon=ko.computed(function(){return r.State()==1?"":r.State()==2?"warning":""},r);r.Entries=ko.observableArray([])}function koPendingGroupModel(n,t){var i=this;i.State=ko.observable(n);i.Entries=ko.observableArray(t)}function koBalanceGroupModel(n){var t=this;t.Type=ko.observable(n.Type);t.Text=ko.observable(n.Text);t.CurrentBalance=ko.observable(decimalFormated(n.CurrentBalance));t.positiveCurrentBalance=ko.observable(n.CurrentBalance>=0);t.PendingBalance=ko.observable(decimalFormated(n.PendingBalance));t.positivePendingBalance=ko.observable(n.PendingBalance>=0);t.Accounts=ko.observableArray();$.each(n.Accounts,function(n,i){t.Accounts.push(new koBalanceModel(i))})}function koBalanceModel(n){var t=this;t.idAccount=ko.observable(n.idAccount);t.Text=ko.observable(n.Text);t.Type=ko.observable(n.Type);t.ClosingDay=ko.observable(n.ClosingDay);t.DueDay=ko.observable(n.DueDay);t.DueDate=ko.observable(moment(n.DueDateText).format("DD/MMM"));t.itemClick=function(){window.location=GetActionUrl("Entries","Index")+"/"+t.idAccount()+"/"};t.InitialBalance=ko.observable(n.InitialBalance);t.CurrentBalance=ko.observable(decimalFormated(n.CurrentBalance));t.positiveCurrentBalance=ko.observable(n.CurrentBalance>=0);t.PendingBalance=ko.observable(decimalFormated(n.PendingBalance));t.positivePendingBalance=ko.observable(n.PendingBalance>=0);t.hasPendingBalance=ko.computed(function(){return n.PendingBalance!=0},t)}var koPendingContext=function(){var n=this;n.isLoading=ko.observable(!1);n.CRUD=function(){var t=ko.dataFor(document.getElementById("entryModal"));return t.refresh=function(){n.loadData()},t};n.data=ko.observableArray();n.loadData=function(){n.data.removeAll();n.isLoading(!0);GetDataJson({url:GetActionUrl("Dashboard","GetPending"),success:function(t){if(t.Result){var i=[],r=[];$.each(t.Data,function(n,t){t.State==2?r.push(new koEntryModel(t)):i.push(new koEntryModel(t))});r.length!=0&&n.data.push(new koPendingGroupModel(2,r));i.length!=0&&n.data.push(new koPendingGroupModel(1,i))}},done:function(){n.isLoading(!1)}})};n.openData=function(){var t=$(this)[0];n.CRUD().openData(t)};n.loadData()},koBalanceContext=function(){var n=this;n.isLoading=ko.observable(!1);n.data=ko.observableArray([]);n.loadData=function(){n.data.removeAll();n.isLoading(!0);GetDataJson({url:GetActionUrl("Dashboard","GetBalance"),success:function(t){t.Result&&$.each(t.Data,function(t,i){n.data.push(new koBalanceGroupModel(i))})},done:function(){n.isLoading(!1)}})};n.loadData()};