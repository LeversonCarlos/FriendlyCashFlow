function koCategoryModel(n){var t=this;t.idCategory=ko.observable(n.idCategory);t.Text=ko.observable(n.Text);t.Type=ko.observable(n.Type);t.idParentRow=ko.observable(n.idParentRow);t.Childs=ko.observableArray([]);n.Childs!=null&&$.each(n.Childs,function(n,i){t.Childs.push(new koCategoryModel(i))})}var koCategoryContext=function(){var n=this;n.isLoading=ko.observable(!1);n.isSaving=ko.observable(!1);n.categoryType=function(){var n=$("li.tab a.active").attr("href");return n=="#tabExpense"?categoryTypeExpense:categoryTypeIncome};n.dataIncome=ko.observableArray([]);n.dataExpense=ko.observableArray([]);n.loadData=function(){n.isLoading(!0);n.dataIncome.removeAll();n.dataExpense.removeAll();GetDataJson({url:GetActionUrl("Categories","GetData"),success:function(t){t.Result&&($.each(t.Data.Income,function(t,i){n.dataIncome.push(new koCategoryModel(i))}),$.each(t.Data.Expense,function(t,i){n.dataExpense.push(new koCategoryModel(i))}))},done:function(){n.isLoading(!1)}})};n.addData=function(){n.selectData(new koCategoryModel({idCategory:-1,Text:"",Type:n.categoryType(),idParentRow:0}))};n.openData=function(){var t=$(this)[0],i=ko.toJS(t),r=new koCategoryModel(i);n.selectData(r)};n.selectedData=ko.observable();n.selectData=function(t){n.selectedData(t);$("#editModal").modal({ready:function(){$("select").material_select();var i=document.getElementById("idParentRow"),n=ko.dataFor(document.getElementById("idParentRow"));t.Type()==categoryTypeIncome?n.relatedFilter('"Income"'):t.Type()==categoryTypeExpense?n.relatedFilter('"Expense"'):n.relatedFilter('""')},show:!0})};n.selectedDataJson=function(){return JSON.parse(JSON.stringify(ko.toJS(n.selectedData)))};n.saveData=function(){n.isSaving(!0);PostDataJson({url:GetActionUrl("Categories","SaveData"),data:n.selectedDataJson(),success:function(){n.loadData();$("#editModal").modal("close")},form:$("#editModal"),done:function(){n.isSaving(!1)}})};n.removeData=function(){n.isSaving(!0);PostDataJson({url:GetActionUrl("Categories","RemoveData"),data:n.selectedDataJson(),success:function(){n.loadData();$("#editModal").modal("close")},form:$("#editModal"),done:function(){n.isSaving(!1)}})};n.IsActiveUser=ko.computed(function(){return authIsActiveUser()},n);n.loadData()};